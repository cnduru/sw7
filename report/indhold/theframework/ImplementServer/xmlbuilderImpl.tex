\subsubsection{XML Builder}
\label{sec:xmlbuilderimpl}
To construct responds to the incoming requests from clients, a component was needed to construct an XML formatted string. The result is the \textit{XMLbuilder} class. This class has one or two respond-messages per method that can be called on the server. Some has just got a single response-messages, because the only thing that changes is the parameters. Others have two respond-messages because they can out different results, e.g. a login-request can either be successful or fail. 

The XML builder is placed in the \textit{Logic Layer} because every response-message is specific for a piece of the game logic placed in the Game Thread. It is regarded as a part of the framework, but it has been used to develop the corresponding game and that can be seen in this class. The XML builder is not a necessary part to create, all response-message can be coded into the corresponding methods but it will affect the readability of the code and cluster a lot of string building into possibly complex methods. We chose to isolate the string building and created a separate class.

The \textit{XMLbuilder} is structured with a stringbuilder in each method. All methods for XML-building are formatted the same way in the code. If a XML-tag contains more information than an attribute, it will be split into a start-tag on one line, and an end-tag on another line. In between can be one or more tags, but if it only contains an attribute it will be a single line containing the start-tag, the attribute-value, and the end-tag. This makes the code easily readable when searching for the XML-formatting for a respond-message. 

The XML builder is compact and encapsulates all response-message very well. The class needs instantiation to be used, whereas it could arguably be more correct to make it as a static class. It is easy to create a new response-message, because already existing messages can be seen in the class.

We have two different standard formats for the XML strings. The first is a method call with attributes - the method name is used as an encapsulation with attributes as tags within. An example could be the response from the client entering a lobby. The response is encapsulated in the tags <Lobbyinfo></lobbyinfo>, with tags like <HostId> and <GameAlias>. The other standard format is a message from the server. An example could be the response to a login from the client. The response would be encapsulated in <Login></Login>, and contains a single tag called <Valid> with the value either true or false depending on the databases response.
